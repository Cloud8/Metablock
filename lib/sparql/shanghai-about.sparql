PREFIX  rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX  dct:   <http://purl.org/dc/terms/>
PREFIX  foaf:  <http://xmlns.com/foaf/0.1/>
PREFIX  fabio: <http://purl.org/spar/fabio/>
PREFIX  aiiso: <http://purl.org/vocab/aiiso/schema#>
PREFIX  frbr: <http://purl.org/vocab/frbr/core#>
PREFIX  pica: <http://localhost/view/>
PREFIX  daia: <http://purl.org/ontology/daia/>
PREFIX  pro: <http://purl.org/spar/pro/>
PREFIX  prism: <http://prismstandard.org/namespaces/basic/2.0/>
PREFIX  cito: <http://purl.org/spar/cito/>

## three levels of hierarchy
construct {
    <subject> ?b ?c .
    ?c ?d ?e .
    ?e ?f ?g .
} where {
  { 
    <subject> ?b ?c .
   } 
  union {
    <subject> ?b ?c .
     values ?b { dct:publisher dct:subject dct:creator pro:editor 
                 dct:references dct:isPartOf dct:XhasPart frbr:exemplar }
     ?c ?d ?e .
    optional {
      ?e ?f ?g
    }
  } 
  FILTER (?b NOT IN (dct:fulltext))
} 

